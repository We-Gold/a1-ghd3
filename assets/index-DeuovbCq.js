(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var Wn={value:()=>{}};function un(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new ot(e)}function ot(t){this._=t}function zn(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}ot.prototype=un.prototype={constructor:ot,on:function(t,n){var e=this._,r=zn(t+"",e),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Kn(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<s;)if(i=(t=r[o]).type)e[i]=Ut(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Ut(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new ot(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function Kn(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Ut(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Wn,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var Lt="http://www.w3.org/1999/xhtml";const Yt={svg:"http://www.w3.org/2000/svg",xhtml:Lt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gt(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Yt.hasOwnProperty(n)?{space:Yt[n],local:t}:t}function Qn(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Lt&&n.documentElement.namespaceURI===Lt?n.createElement(t):n.createElementNS(e,t)}}function Jn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function fn(t){var n=gt(t);return(n.local?Jn:Qn)(n)}function jn(){}function It(t){return t==null?jn:function(){return this.querySelector(t)}}function te(t){typeof t!="function"&&(t=It(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new v(r,this._parents)}function ne(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ee(){return[]}function hn(t){return t==null?ee:function(){return this.querySelectorAll(t)}}function re(t){return function(){return ne(t.apply(this,arguments))}}function ie(t){typeof t=="function"?t=re(t):t=hn(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var s=n[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(t.call(c,c.__data__,l,s)),i.push(c));return new v(r,i)}function dn(t){return function(){return this.matches(t)}}function pn(t){return function(n){return n.matches(t)}}var oe=Array.prototype.find;function se(t){return function(){return oe.call(this.children,t)}}function ae(){return this.firstElementChild}function ce(t){return this.select(t==null?ae:se(typeof t=="function"?t:pn(t)))}var le=Array.prototype.filter;function ue(){return Array.from(this.children)}function fe(t){return function(){return le.call(this.children,t)}}function he(t){return this.selectAll(t==null?ue:fe(typeof t=="function"?t:pn(t)))}function de(t){typeof t!="function"&&(t=dn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new v(r,this._parents)}function gn(t){return new Array(t.length)}function pe(){return new v(this._enter||this._groups.map(gn),this._parents)}function ct(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}ct.prototype={constructor:ct,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ge(t){return function(){return t}}function ye(t,n,e,r,i,o){for(var s=0,a,c=n.length,l=o.length;s<l;++s)(a=n[s])?(a.__data__=o[s],r[s]=a):e[s]=new ct(t,o[s]);for(;s<c;++s)(a=n[s])&&(i[s]=a)}function _e(t,n,e,r,i,o,s){var a,c,l=new Map,u=n.length,f=o.length,h=new Array(u),d;for(a=0;a<u;++a)(c=n[a])&&(h[a]=d=s.call(c,c.__data__,a,n)+"",l.has(d)?i[a]=c:l.set(d,c));for(a=0;a<f;++a)d=s.call(t,o[a],a,o)+"",(c=l.get(d))?(r[a]=c,c.__data__=o[a],l.delete(d)):e[a]=new ct(t,o[a]);for(a=0;a<u;++a)(c=n[a])&&l.get(h[a])===c&&(i[a]=c)}function xe(t){return t.__data__}function we(t,n){if(!arguments.length)return Array.from(this,xe);var e=n?_e:ye,r=this._parents,i=this._groups;typeof t!="function"&&(t=ge(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],h=f.length,d=me(t.call(u,u&&u.__data__,l,r)),p=d.length,g=a[l]=new Array(p),m=s[l]=new Array(p),xt=c[l]=new Array(h);e(u,f,g,m,xt,d,n);for(var k=0,I=0,tt,P;k<p;++k)if(tt=g[k]){for(k>=I&&(I=k+1);!(P=m[I])&&++I<p;);tt._next=P||null}}return s=new v(s,r),s._enter=a,s._exit=c,s}function me(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ve(){return new v(this._exit||this._groups.map(gn),this._parents)}function Le(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function be(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=e[c],u=r[c],f=l.length,h=a[c]=new Array(f),d,p=0;p<f;++p)(d=l[p]||u[p])&&(h[p]=d);for(;c<i;++c)a[c]=e[c];return new v(a,this._parents)}function Me(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function $e(t){t||(t=Ce);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var s=e[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(n)}return new v(i,this._parents).order()}function Ce(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Se(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ne(){return Array.from(this)}function Ae(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Ee(){let t=0;for(const n of this)++t;return t}function ke(){return!this.node()}function Ie(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Te(t){return function(){this.removeAttribute(t)}}function Ze(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Re(t,n){return function(){this.setAttribute(t,n)}}function He(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Fe(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function De(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Oe(t,n){var e=gt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Ze:Te:typeof n=="function"?e.local?De:Fe:e.local?He:Re)(e,n))}function yn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ve(t){return function(){this.style.removeProperty(t)}}function Pe(t,n,e){return function(){this.style.setProperty(t,n,e)}}function qe(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Xe(t,n,e){return arguments.length>1?this.each((n==null?Ve:typeof n=="function"?qe:Pe)(t,n,e??"")):O(this.node(),t)}function O(t,n){return t.style.getPropertyValue(n)||yn(t).getComputedStyle(t,null).getPropertyValue(n)}function Be(t){return function(){delete this[t]}}function Ue(t,n){return function(){this[t]=n}}function Ye(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Ge(t,n){return arguments.length>1?this.each((n==null?Be:typeof n=="function"?Ye:Ue)(t,n)):this.node()[t]}function _n(t){return t.trim().split(/^|\s+/)}function Tt(t){return t.classList||new xn(t)}function xn(t){this._node=t,this._names=_n(t.getAttribute("class")||"")}xn.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function wn(t,n){for(var e=Tt(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function mn(t,n){for(var e=Tt(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function We(t){return function(){wn(this,t)}}function ze(t){return function(){mn(this,t)}}function Ke(t,n){return function(){(n.apply(this,arguments)?wn:mn)(this,t)}}function Qe(t,n){var e=_n(t+"");if(arguments.length<2){for(var r=Tt(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?Ke:n?We:ze)(e,n))}function Je(){this.textContent=""}function je(t){return function(){this.textContent=t}}function tr(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function nr(t){return arguments.length?this.each(t==null?Je:(typeof t=="function"?tr:je)(t)):this.node().textContent}function er(){this.innerHTML=""}function rr(t){return function(){this.innerHTML=t}}function ir(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function or(t){return arguments.length?this.each(t==null?er:(typeof t=="function"?ir:rr)(t)):this.node().innerHTML}function sr(){this.nextSibling&&this.parentNode.appendChild(this)}function ar(){return this.each(sr)}function cr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lr(){return this.each(cr)}function ur(t){var n=typeof t=="function"?t:fn(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function fr(){return null}function hr(t,n){var e=typeof t=="function"?t:fn(t),r=n==null?fr:typeof n=="function"?n:It(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function dr(){var t=this.parentNode;t&&t.removeChild(this)}function pr(){return this.each(dr)}function gr(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function yr(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function _r(t){return this.select(t?yr:gr)}function xr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function wr(t){return function(n){t.call(this,n,this.__data__)}}function mr(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function vr(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function Lr(t,n,e){return function(){var r=this.__on,i,o=wr(n);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function br(t,n,e){var r=mr(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=n?Lr:vr,i=0;i<o;++i)this.each(a(r[i],n,e));return this}function vn(t,n,e){var r=yn(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Mr(t,n){return function(){return vn(this,t,n)}}function $r(t,n){return function(){return vn(this,t,n.apply(this,arguments))}}function Cr(t,n){return this.each((typeof n=="function"?$r:Mr)(t,n))}function*Sr(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Ln=[null];function v(t,n){this._groups=t,this._parents=n}function K(){return new v([[document.documentElement]],Ln)}function Nr(){return this}v.prototype=K.prototype={constructor:v,select:te,selectAll:ie,selectChild:ce,selectChildren:he,filter:de,data:we,enter:pe,exit:ve,join:Le,merge:be,selection:Nr,order:Me,sort:$e,call:Se,nodes:Ne,node:Ae,size:Ee,empty:ke,each:Ie,attr:Oe,style:Xe,property:Ge,classed:Qe,text:nr,html:or,raise:ar,lower:lr,append:ur,insert:hr,remove:pr,clone:_r,datum:xr,on:br,dispatch:Cr,[Symbol.iterator]:Sr};function Ar(t){return typeof t=="string"?new v([[document.querySelector(t)]],[document.documentElement]):new v([[t]],Ln)}function Zt(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function bn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Q(){}var Y=.7,lt=1/Y,D="\\s*([+-]?\\d+)\\s*",G="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",M="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Er=/^#([0-9a-f]{3,8})$/,kr=new RegExp(`^rgb\\(${D},${D},${D}\\)$`),Ir=new RegExp(`^rgb\\(${M},${M},${M}\\)$`),Tr=new RegExp(`^rgba\\(${D},${D},${D},${G}\\)$`),Zr=new RegExp(`^rgba\\(${M},${M},${M},${G}\\)$`),Rr=new RegExp(`^hsl\\(${G},${M},${M}\\)$`),Hr=new RegExp(`^hsla\\(${G},${M},${M},${G}\\)$`),Gt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zt(Q,W,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wt,formatHex:Wt,formatHex8:Fr,formatHsl:Dr,formatRgb:zt,toString:zt});function Wt(){return this.rgb().formatHex()}function Fr(){return this.rgb().formatHex8()}function Dr(){return Mn(this).formatHsl()}function zt(){return this.rgb().formatRgb()}function W(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Er.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Kt(n):e===3?new w(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?et(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?et(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=kr.exec(t))?new w(n[1],n[2],n[3],1):(n=Ir.exec(t))?new w(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Tr.exec(t))?et(n[1],n[2],n[3],n[4]):(n=Zr.exec(t))?et(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Rr.exec(t))?jt(n[1],n[2]/100,n[3]/100,1):(n=Hr.exec(t))?jt(n[1],n[2]/100,n[3]/100,n[4]):Gt.hasOwnProperty(t)?Kt(Gt[t]):t==="transparent"?new w(NaN,NaN,NaN,0):null}function Kt(t){return new w(t>>16&255,t>>8&255,t&255,1)}function et(t,n,e,r){return r<=0&&(t=n=e=NaN),new w(t,n,e,r)}function Or(t){return t instanceof Q||(t=W(t)),t?(t=t.rgb(),new w(t.r,t.g,t.b,t.opacity)):new w}function bt(t,n,e,r){return arguments.length===1?Or(t):new w(t,n,e,r??1)}function w(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}Zt(w,bt,bn(Q,{brighter(t){return t=t==null?lt:Math.pow(lt,t),new w(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Y:Math.pow(Y,t),new w(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new w(R(this.r),R(this.g),R(this.b),ut(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qt,formatHex:Qt,formatHex8:Vr,formatRgb:Jt,toString:Jt}));function Qt(){return`#${Z(this.r)}${Z(this.g)}${Z(this.b)}`}function Vr(){return`#${Z(this.r)}${Z(this.g)}${Z(this.b)}${Z((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jt(){const t=ut(this.opacity);return`${t===1?"rgb(":"rgba("}${R(this.r)}, ${R(this.g)}, ${R(this.b)}${t===1?")":`, ${t})`}`}function ut(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function R(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Z(t){return t=R(t),(t<16?"0":"")+t.toString(16)}function jt(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new L(t,n,e,r)}function Mn(t){if(t instanceof L)return new L(t.h,t.s,t.l,t.opacity);if(t instanceof Q||(t=W(t)),!t)return new L;if(t instanceof L)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),s=NaN,a=o-i,c=(o+i)/2;return a?(n===o?s=(e-r)/a+(e<r)*6:e===o?s=(r-n)/a+2:s=(n-e)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new L(s,a,c,t.opacity)}function Pr(t,n,e,r){return arguments.length===1?Mn(t):new L(t,n,e,r??1)}function L(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}Zt(L,Pr,bn(Q,{brighter(t){return t=t==null?lt:Math.pow(lt,t),new L(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Y:Math.pow(Y,t),new L(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new w(mt(t>=240?t-240:t+120,i,r),mt(t,i,r),mt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new L(tn(this.h),rt(this.s),rt(this.l),ut(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ut(this.opacity);return`${t===1?"hsl(":"hsla("}${tn(this.h)}, ${rt(this.s)*100}%, ${rt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function tn(t){return t=(t||0)%360,t<0?t+360:t}function rt(t){return Math.max(0,Math.min(1,t||0))}function mt(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const $n=t=>()=>t;function qr(t,n){return function(e){return t+e*n}}function Xr(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Br(t){return(t=+t)==1?Cn:function(n,e){return e-n?Xr(n,e,t):$n(isNaN(n)?e:n)}}function Cn(t,n){var e=n-t;return e?qr(t,e):$n(isNaN(t)?n:t)}const nn=(function t(n){var e=Br(n);function r(i,o){var s=e((i=bt(i)).r,(o=bt(o)).r),a=e(i.g,o.g),c=e(i.b,o.b),l=Cn(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r})(1);function N(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vt=new RegExp(Mt.source,"g");function Ur(t){return function(){return t}}function Yr(t){return function(n){return t(n)+""}}function Gr(t,n){var e=Mt.lastIndex=vt.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",n=n+"";(r=Mt.exec(t))&&(i=vt.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:N(r,i)})),e=vt.lastIndex;return e<n.length&&(o=n.slice(e),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?Yr(c[0].x):Ur(n):(n=c.length,function(l){for(var u=0,f;u<n;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}var en=180/Math.PI,$t={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,n,e,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+n*n))&&(t/=s,n/=s),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,c/=a),t*r<n*e&&(t=-t,n=-n,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*en,skewX:Math.atan(c)*en,scaleX:s,scaleY:a}}var it;function Wr(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?$t:Sn(n.a,n.b,n.c,n.d,n.e,n.f)}function zr(t){return t==null||(it||(it=document.createElementNS("http://www.w3.org/2000/svg","g")),it.setAttribute("transform",t),!(t=it.transform.baseVal.consolidate()))?$t:(t=t.matrix,Sn(t.a,t.b,t.c,t.d,t.e,t.f))}function Nn(t,n,e,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,d,p){if(l!==f||u!==h){var g=d.push("translate(",null,n,null,e);p.push({i:g-4,x:N(l,f)},{i:g-2,x:N(u,h)})}else(f||h)&&d.push("translate("+f+n+h+e)}function s(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:N(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:N(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,d,p){if(l!==f||u!==h){var g=d.push(i(d)+"scale(",null,",",null,")");p.push({i:g-4,x:N(l,f)},{i:g-2,x:N(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),s(l.rotate,u.rotate,f,h),a(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(d){for(var p=-1,g=h.length,m;++p<g;)f[(m=h[p]).i]=m.x(d);return f.join("")}}}var Kr=Nn(Wr,"px, ","px)","deg)"),Qr=Nn(zr,", ",")",")"),V=0,X=0,q=0,An=1e3,ft,B,ht=0,H=0,yt=0,z=typeof performance=="object"&&performance.now?performance:Date,En=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Rt(){return H||(En(Jr),H=z.now()+yt)}function Jr(){H=0}function dt(){this._call=this._time=this._next=null}dt.prototype=kn.prototype={constructor:dt,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Rt():+e)+(n==null?0:+n),!this._next&&B!==this&&(B?B._next=this:ft=this,B=this),this._call=t,this._time=e,Ct()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ct())}};function kn(t,n,e){var r=new dt;return r.restart(t,n,e),r}function jr(){Rt(),++V;for(var t=ft,n;t;)(n=H-t._time)>=0&&t._call.call(void 0,n),t=t._next;--V}function rn(){H=(ht=z.now())+yt,V=X=0;try{jr()}finally{V=0,ni(),H=0}}function ti(){var t=z.now(),n=t-ht;n>An&&(yt-=n,ht=t)}function ni(){for(var t,n=ft,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ft=e);B=t,Ct(r)}function Ct(t){if(!V){X&&(X=clearTimeout(X));var n=t-H;n>24?(t<1/0&&(X=setTimeout(rn,t-z.now()-yt)),q&&(q=clearInterval(q))):(q||(ht=z.now(),q=setInterval(ti,An)),V=1,En(rn))}}function on(t,n,e){var r=new dt;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var ei=un("start","end","cancel","interrupt"),ri=[],In=0,sn=1,St=2,st=3,an=4,Nt=5,at=6;function _t(t,n,e,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(e in s)return;ii(t,e,{name:n,index:r,group:i,on:ei,tween:ri,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:In})}function Ht(t,n){var e=b(t,n);if(e.state>In)throw new Error("too late; already scheduled");return e}function $(t,n){var e=b(t,n);if(e.state>st)throw new Error("too late; already running");return e}function b(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function ii(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=kn(o,0,e.time);function o(l){e.state=sn,e.timer.restart(s,e.delay,e.time),e.delay<=l&&s(l-e.delay)}function s(l){var u,f,h,d;if(e.state!==sn)return c();for(u in r)if(d=r[u],d.name===e.name){if(d.state===st)return on(s);d.state===an?(d.state=at,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<n&&(d.state=at,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(on(function(){e.state===st&&(e.state=an,e.timer.restart(a,e.delay,e.time),a(l))}),e.state=St,e.on.call("start",t,t.__data__,e.index,e.group),e.state===St){for(e.state=st,i=new Array(h=e.tween.length),u=0,f=-1;u<h;++u)(d=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(i[++f]=d);i.length=f+1}}function a(l){for(var u=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(c),e.state=Nt,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);e.state===Nt&&(e.on.call("end",t,t.__data__,e.index,e.group),c())}function c(){e.state=at,e.timer.stop(),delete r[n];for(var l in r)return;delete t.__transition}}function oi(t,n){var e=t.__transition,r,i,o=!0,s;if(e){n=n==null?null:n+"";for(s in e){if((r=e[s]).name!==n){o=!1;continue}i=r.state>St&&r.state<Nt,r.state=at,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[s]}o&&delete t.__transition}}function si(t){return this.each(function(){oi(this,t)})}function ai(t,n){var e,r;return function(){var i=$(this,t),o=i.tween;if(o!==e){r=e=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===n){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function ci(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=$(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:n,value:e},c=0,l=i.length;c<l;++c)if(i[c].name===n){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function li(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=b(this.node(),e).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((n==null?ai:ci)(e,t,n))}function Ft(t,n,e){var r=t._id;return t.each(function(){var i=$(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return b(i,r).value[n]}}function Tn(t,n){var e;return(typeof n=="number"?N:n instanceof W?nn:(e=W(n))?(n=e,nn):Gr)(t,n)}function ui(t){return function(){this.removeAttribute(t)}}function fi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hi(t,n,e){var r,i=e+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=n(r=s,e)}}function di(t,n,e){var r,i=e+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=n(r=s,e)}}function pi(t,n,e){var r,i,o;return function(){var s,a=e(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=n(r=s,a)))}}function gi(t,n,e){var r,i,o;return function(){var s,a=e(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=n(r=s,a)))}}function yi(t,n){var e=gt(t),r=e==="transform"?Qr:Tn;return this.attrTween(t,typeof n=="function"?(e.local?gi:pi)(e,r,Ft(this,"attr."+t,n)):n==null?(e.local?fi:ui)(e):(e.local?di:hi)(e,r,n))}function _i(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function xi(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function wi(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&xi(t,o)),e}return i._value=n,i}function mi(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&_i(t,o)),e}return i._value=n,i}function vi(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=gt(t);return this.tween(e,(r.local?wi:mi)(r,n))}function Li(t,n){return function(){Ht(this,t).delay=+n.apply(this,arguments)}}function bi(t,n){return n=+n,function(){Ht(this,t).delay=n}}function Mi(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Li:bi)(n,t)):b(this.node(),n).delay}function $i(t,n){return function(){$(this,t).duration=+n.apply(this,arguments)}}function Ci(t,n){return n=+n,function(){$(this,t).duration=n}}function Si(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?$i:Ci)(n,t)):b(this.node(),n).duration}function Ni(t,n){if(typeof n!="function")throw new Error;return function(){$(this,t).ease=n}}function Ai(t){var n=this._id;return arguments.length?this.each(Ni(n,t)):b(this.node(),n).ease}function Ei(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;$(this,t).ease=e}}function ki(t){if(typeof t!="function")throw new Error;return this.each(Ei(this._id,t))}function Ii(t){typeof t!="function"&&(t=dn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new S(r,this._parents,this._name,this._id)}function Ti(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=n[a],l=e[a],u=c.length,f=s[a]=new Array(u),h,d=0;d<u;++d)(h=c[d]||l[d])&&(f[d]=h);for(;a<r;++a)s[a]=n[a];return new S(s,this._parents,this._name,this._id)}function Zi(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Ri(t,n,e){var r,i,o=Zi(n)?Ht:$;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(n,e),s.on=i}}function Hi(t,n){var e=this._id;return arguments.length<2?b(this.node(),e).on.on(t):this.each(Ri(e,t,n))}function Fi(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Di(){return this.on("end.remove",Fi(this._id))}function Oi(t){var n=this._name,e=this._id;typeof t!="function"&&(t=It(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),u,f,h=0;h<c;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,_t(l[h],n,e,h,l,b(u,e)));return new S(o,this._parents,n,e)}function Vi(t){var n=this._name,e=this._id;typeof t!="function"&&(t=hn(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),d,p=b(u,e),g=0,m=h.length;g<m;++g)(d=h[g])&&_t(d,n,e,g,h,p);o.push(h),s.push(u)}return new S(o,s,n,e)}var Pi=K.prototype.constructor;function qi(){return new Pi(this._groups,this._parents)}function Xi(t,n){var e,r,i;return function(){var o=O(this,t),s=(this.style.removeProperty(t),O(this,t));return o===s?null:o===e&&s===r?i:i=n(e=o,r=s)}}function Zn(t){return function(){this.style.removeProperty(t)}}function Bi(t,n,e){var r,i=e+"",o;return function(){var s=O(this,t);return s===i?null:s===r?o:o=n(r=s,e)}}function Ui(t,n,e){var r,i,o;return function(){var s=O(this,t),a=e(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),O(this,t))),s===c?null:s===r&&c===i?o:(i=c,o=n(r=s,a))}}function Yi(t,n){var e,r,i,o="style."+n,s="end."+o,a;return function(){var c=$(this,t),l=c.on,u=c.value[o]==null?a||(a=Zn(n)):void 0;(l!==e||i!==u)&&(r=(e=l).copy()).on(s,i=u),c.on=r}}function Gi(t,n,e){var r=(t+="")=="transform"?Kr:Tn;return n==null?this.styleTween(t,Xi(t,r)).on("end.style."+t,Zn(t)):typeof n=="function"?this.styleTween(t,Ui(t,r,Ft(this,"style."+t,n))).each(Yi(this._id,t)):this.styleTween(t,Bi(t,r,n),e).on("end.style."+t,null)}function Wi(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function zi(t,n,e){var r,i;function o(){var s=n.apply(this,arguments);return s!==i&&(r=(i=s)&&Wi(t,s,e)),r}return o._value=n,o}function Ki(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,zi(t,n,e??""))}function Qi(t){return function(){this.textContent=t}}function Ji(t){return function(){var n=t(this);this.textContent=n??""}}function ji(t){return this.tween("text",typeof t=="function"?Ji(Ft(this,"text",t)):Qi(t==null?"":t+""))}function to(t){return function(n){this.textContent=t.call(this,n)}}function no(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&to(i)),n}return r._value=t,r}function eo(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,no(t))}function ro(){for(var t=this._name,n=this._id,e=Rn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=b(c,n);_t(c,t,e,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new S(r,this._parents,t,e)}function io(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};e.each(function(){var l=$(this,r),u=l.on;u!==t&&(n=(t=u).copy(),n._.cancel.push(a),n._.interrupt.push(a),n._.end.push(c)),l.on=n}),i===0&&o()})}var oo=0;function S(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Rn(){return++oo}var C=K.prototype;S.prototype={constructor:S,select:Oi,selectAll:Vi,selectChild:C.selectChild,selectChildren:C.selectChildren,filter:Ii,merge:Ti,selection:qi,transition:ro,call:C.call,nodes:C.nodes,node:C.node,size:C.size,empty:C.empty,each:C.each,on:Hi,attr:yi,attrTween:vi,style:Gi,styleTween:Ki,text:ji,textTween:eo,remove:Di,tween:li,delay:Mi,duration:Si,ease:Ai,easeVarying:ki,end:io,[Symbol.iterator]:C[Symbol.iterator]};function so(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ao={time:null,delay:0,duration:250,ease:so};function co(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function lo(t){var n,e;t instanceof S?(n=t._id,t=t._name):(n=Rn(),(e=ao).time=Rt(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&_t(c,t,n,l,s,e||co(c,n));return new S(r,this._parents,t,n)}K.prototype.interrupt=si;K.prototype.transition=lo;function U(t,n,e){this.k=t,this.x=n,this.y=e}U.prototype={constructor:U,scale:function(t){return t===1?this:new U(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new U(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};U.prototype;const Hn="time",Fn="sundial",At=600,A=At/2-20,Et=.8,uo=32.74554724936368,fo=-117.14900988976665,_=t=>t*Math.PI/180,ho=t=>t*180/Math.PI,po=t=>{const n=(t%12+12)%12||12;return["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"][n-1]},Dn=()=>new Date,go=()=>Math.floor(Dn().getTime()/1e3),yo=t=>{const n=t.getHours(),e=t.getMinutes(),r=t.getSeconds();return`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`};var E=(t=>(t[t.Line=0]="Line",t[t.Wedge=1]="Wedge",t[t.RightTriangle=2]="RightTriangle",t[t.CurvedWall=3]="CurvedWall",t))(E||{});const _o=2,xo=22,On=12,Vn=360/24,J=(t,n,e)=>(t-n)*e,j=(t,n,e,r)=>{const i=J(t,n,e),o=Math.tan(_(i))*Math.sin(_(r));let s=ho(Math.atan(o));return Math.abs(i)>90&&(s+=180),s},wo=(t,n)=>{for(let e=_o;e<=xo;e++){const r=j(e,On,Vn,n),i=_(r-90),o=(A-10)*Math.cos(i),s=(A-10)*Math.sin(i),a=A*Math.cos(i),c=A*Math.sin(i);t.append("line").attr("x1",o).attr("y1",s).attr("x2",a).attr("y2",c).attr("stroke","black").attr("stroke-width",2);const l=(A-30)*Math.cos(i),u=(A-30)*Math.sin(i),f=r-90;t.append("text").attr("transform",`translate(${l}, ${u}) rotate(${f+90})`).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","28px").attr("font-family","Gideon Roman").text(po(e))}},mo=(t,n,e,r,i,o)=>{const s=-o*Math.cos(_(n));t.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",s).attr("stroke","black").attr("stroke-width",4);const a=_(j(e,r,i,n)),c=_(J(e,r,i)),l=Math.asin(Math.cos(_(n))*Math.cos(c)),u=o/Math.tan(l),f={x:u*Math.sin(a),y:-u*Math.cos(a)};t.append("line").attr("x1",0).attr("y1",0).attr("x2",f.x).attr("y2",f.y).attr("stroke","rgba(0, 0, 0, 0.5)").attr("stroke-width",2)},vo=(t,n,e,r,i,o)=>{const s=-o*Math.cos(_(n)),a=18,c={x:-a/2,y:0},l={x:a/2,y:0},u={x:0,y:s};t.append("polygon").attr("points",`${c.x},${c.y} ${l.x},${l.y} ${u.x},${u.y}`).attr("fill","black").attr("stroke","black").attr("stroke-width",2);const f=_(j(e,r,i,n)),h=_(J(e,r,i)),d=Math.asin(Math.cos(_(n))*Math.cos(h)),p=Math.tan(d);if(!Number.isFinite(p)||Math.abs(p)<1e-6)return;const g=o/p,m={x:g*Math.sin(f),y:-g*Math.cos(f)};t.append("polygon").attr("points",`${c.x},${c.y} ${l.x},${l.y} ${m.x},${m.y}`).attr("fill","rgba(0, 0, 0, 0.25)")},Lo=(t,n,e,r,i,o)=>{const s={x:0,y:-o*Math.cos(_(n))},c={x:s.x+8,y:s.y},l={x:0,y:0};t.append("polygon").attr("points",`${l.x},${l.y} ${s.x},${s.y} ${c.x},${c.y}`).attr("fill","black").attr("stroke","black").attr("stroke-width",2);const u=_(j(e,r,i,n)),f=_(J(e,r,i)),h=Math.asin(Math.cos(_(n))*Math.cos(f)),d=Math.tan(h);if(!Number.isFinite(d)||Math.abs(d)<1e-6)return;const p=o/d,g={x:p*Math.sin(u),y:-p*Math.cos(u)};t.append("polygon").attr("points",`${l.x},${l.y} ${s.x},${s.y} ${g.x},${g.y}`).attr("fill","rgba(0, 0, 0, 0.25)")},bo=(t,n,e,r,i,o)=>{const s={x:0,y:0},a={x:0,y:-o*Math.cos(_(n))},l={x:a.x+10,y:a.y},u=(y,x)=>({x:(y.x+x.x)/2,y:(y.y+x.y)/2}),f=(y,x)=>Math.hypot(y.x-x.x,y.y-x.y),h=y=>{const x=Math.hypot(y.x,y.y);return x===0?{x:0,y:0}:{x:y.x/x,y:y.y/x}},d=(y,x)=>({x:y.x+x.x,y:y.y+x.y}),p=(y,x)=>({x:y.x*x,y:y.y*x}),g=(y,x)=>({x:y.x-x.x,y:y.y-x.y}),m=u(a,l),xt=h(g(s,m)),k=Math.min(14,f(a,l)*1.2),I=d(m,p(xt,k)),tt=`M ${s.x} ${s.y} L ${a.x} ${a.y} Q ${I.x} ${I.y} ${l.x} ${l.y} Z`;t.append("path").attr("d",tt).attr("fill","black").attr("stroke","black").attr("stroke-width",2);const P=_(j(e,r,i,n)),Xn=_(J(e,r,i)),Bn=Math.asin(Math.cos(_(n))*Math.cos(Xn)),wt=Math.tan(Bn);if(!Number.isFinite(wt)||Math.abs(wt)<1e-6)return;const qt=o/wt,nt={x:qt*Math.sin(P),y:-qt*Math.cos(P)},Xt=u(a,nt),Un=h(g(s,Xt)),Yn=Math.min(18,f(a,nt)*.15),Bt=d(Xt,p(Un,Yn)),Gn=`M ${s.x} ${s.y} L ${a.x} ${a.y} Q ${Bt.x} ${Bt.y} ${nt.x} ${nt.y} Z`;t.append("path").attr("d",Gn).attr("fill","rgba(0, 0, 0, 0.25)")},Dt=(t,n=3,e=Et)=>{const r=Dn(),i=r.getHours(),o=r.getMinutes(),s=yo(r);document.getElementById(Hn).textContent=s;const a=Ar(`#${Fn}`);a.selectAll("*").remove();const c=At,l=At,u=A,f=a.append("svg").attr("width",c).attr("height",l).append("g").attr("transform",`translate(${c/2}, ${l/2})`);f.append("circle").attr("r",u).attr("fill","#FFD700").attr("stroke","black").attr("stroke-width",2),wo(f,t.latitudeDegrees);const h=Number.isFinite(e)?Math.min(.9,Math.max(.3,e)):Et,d=A*h,p=[f,t.latitudeDegrees,i+o/60,On,Vn,d];switch(n){case 0:mo(...p);break;case 1:vo(...p);break;case 2:Lo(...p);break;case 3:bo(...p);break}},kt={latitudeDegrees:uo,longitudeDegrees:fo},Ot=()=>kt,Mo=()=>new Promise((t,n)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t,n):n(new Error("Geolocation is not supported by this browser."))}),$o=async()=>{try{const t=await Mo();kt.latitudeDegrees=t.coords.latitude,kt.longitudeDegrees=t.coords.longitude}catch(t){console.error("Error fetching user location:",t)}},Pn="sundial.gnomonStyle",cn="sundial.gnomonLengthScale";let F=E.CurvedWall,T=Et;const Co=()=>{try{const t=localStorage.getItem(Pn);if(t===null)return null;const n=Number(t);return Number.isInteger(n)&&n in E?n:null}catch{return null}},Vt=()=>F,Pt=()=>T,So=()=>{const t=document.getElementById("settings-panel");if(!t)return;const n=document.getElementById("settings-btn"),e=()=>{if(!n)return;const a=!t.classList.contains("hidden");n.classList.toggle("active",a),n.setAttribute("aria-expanded",String(a))},r=Co();r!==null&&(F=r);try{const a=localStorage.getItem(cn);if(a!==null){const c=Number(a);Number.isFinite(c)&&c>=.3&&c<=.9&&(T=c)}}catch{}n?.addEventListener("click",a=>{a.preventDefault(),t.classList.toggle("hidden"),e()}),e(),t.innerHTML=`
		<h2>Settings</h2>
		<label for="gnomon-style-select">Sundial mode</label>
		<select id="gnomon-style-select">
			<option value="${E.Line}">Line</option>
			<option value="${E.Wedge}">Wedge</option>
			<option value="${E.RightTriangle}">Right triangle</option>
			<option value="${E.CurvedWall}">Curved wall</option>
		</select>
		<label for="gnomon-length-scale">Gnomon length</label>
		<input
			id="gnomon-length-scale"
			type="range"
			min="0.3"
			max="0.9"
			step="0.01"
			value="${T}"
		/>
	`;const i=t.querySelector("#gnomon-style-select");if(!i)return;i.value=String(F),i.addEventListener("change",()=>{const a=Number(i.value);if(Number.isInteger(a)&&a in E){F=a;try{localStorage.setItem(Pn,String(F))}catch{}window.dispatchEvent(new CustomEvent("sundial:gnomonStyleChanged",{detail:F}))}});const o=t.querySelector("#gnomon-length-scale");if(!o)return;const s=a=>Math.min(.9,Math.max(.3,a));o.value=String(T),o.addEventListener("input",()=>{const a=s(Number(o.value));if(Number.isFinite(a)){T=a;try{localStorage.setItem(cn,String(T))}catch{}window.dispatchEvent(new CustomEvent("sundial:gnomonLengthScaleChanged",{detail:T}))}})};document.querySelector("#app").innerHTML=`
  <div id="container">
    <h1 id=${Hn}></h1>
    <div id=${Fn}></div>
  </div>
  <a id="locate-btn" href="" target="_blank" rel="noopener noreferrer" title="Use Current Location (WPI is default)">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
      <circle cx="12" cy="10" r="3"></circle>
    </svg>
  </a>
  <a id="settings-btn" href="" target="_blank" rel="noopener noreferrer" title="Settings">
    <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
      <path d="M13.5 2L13.9961 1.93798C13.9649 1.68777 13.7522 1.5 13.5 1.5V2ZM10.5 2V1.5C10.2478 1.5 10.0351 1.68777 10.0039 1.93798L10.5 2ZM13.7747 4.19754L13.2786 4.25955C13.3047 4.46849 13.4589 4.63867 13.6642 4.68519L13.7747 4.19754ZM16.2617 5.22838L15.995 5.6513C16.1731 5.76362 16.4024 5.75233 16.5687 5.62306L16.2617 5.22838ZM18.0104 3.86826L18.364 3.51471C18.1857 3.3364 17.9025 3.31877 17.7034 3.47359L18.0104 3.86826ZM20.1317 5.98958L20.5264 6.29655C20.6812 6.09751 20.6636 5.81434 20.4853 5.63603L20.1317 5.98958ZM18.7716 7.73831L18.3769 7.43134C18.2477 7.59754 18.2364 7.82693 18.3487 8.00503L18.7716 7.73831ZM19.8025 10.2253L19.3148 10.3358C19.3613 10.5411 19.5315 10.6953 19.7404 10.7214L19.8025 10.2253ZM22 10.5H22.5C22.5 10.2478 22.3122 10.0351 22.062 10.0039L22 10.5ZM22 13.5L22.062 13.9961C22.3122 13.9649 22.5 13.7522 22.5 13.5H22ZM19.8025 13.7747L19.7404 13.2786C19.5315 13.3047 19.3613 13.4589 19.3148 13.6642L19.8025 13.7747ZM18.7716 16.2617L18.3487 15.995C18.2364 16.1731 18.2477 16.4025 18.3769 16.5687L18.7716 16.2617ZM20.1317 18.0104L20.4853 18.364C20.6636 18.1857 20.6812 17.9025 20.5264 17.7034L20.1317 18.0104ZM18.0104 20.1317L17.7034 20.5264C17.9025 20.6812 18.1857 20.6636 18.364 20.4853L18.0104 20.1317ZM16.2617 18.7716L16.5687 18.3769C16.4024 18.2477 16.1731 18.2364 15.995 18.3487L16.2617 18.7716ZM13.7747 19.8025L13.6642 19.3148C13.4589 19.3613 13.3047 19.5315 13.2786 19.7404L13.7747 19.8025ZM13.5 22V22.5C13.7522 22.5 13.9649 22.3122 13.9961 22.062L13.5 22ZM10.5 22L10.0039 22.062C10.0351 22.3122 10.2478 22.5 10.5 22.5V22ZM10.2253 19.8025L10.7214 19.7404C10.6953 19.5315 10.5411 19.3613 10.3358 19.3148L10.2253 19.8025ZM7.73832 18.7716L8.00504 18.3487C7.82694 18.2364 7.59756 18.2477 7.43135 18.3769L7.73832 18.7716ZM5.98959 20.1317L5.63604 20.4853C5.81435 20.6636 6.09752 20.6812 6.29656 20.5264L5.98959 20.1317ZM3.86827 18.0104L3.4736 17.7034C3.31878 17.9025 3.33641 18.1857 3.51472 18.364L3.86827 18.0104ZM5.22839 16.2617L5.62307 16.5687C5.75234 16.4025 5.76363 16.1731 5.65131 15.995L5.22839 16.2617ZM4.19754 13.7747L4.68519 13.6642C4.63867 13.4589 4.46849 13.3047 4.25955 13.2786L4.19754 13.7747ZM2 13.5H1.5C1.5 13.7522 1.68777 13.9649 1.93798 13.9961L2 13.5ZM2 10.5L1.93798 10.0039C1.68777 10.0351 1.5 10.2478 1.5 10.5H2ZM4.19754 10.2253L4.25955 10.7214C4.46849 10.6953 4.63867 10.5411 4.68519 10.3358L4.19754 10.2253ZM5.22839 7.73831L5.65131 8.00503C5.76363 7.82693 5.75234 7.59755 5.62307 7.43134L5.22839 7.73831ZM3.86827 5.98959L3.51472 5.63603C3.33641 5.81434 3.31878 6.09751 3.47359 6.29656L3.86827 5.98959ZM5.98959 3.86827L6.29656 3.47359C6.09752 3.31878 5.81434 3.33641 5.63604 3.51471L5.98959 3.86827ZM7.73832 5.22839L7.43135 5.62306C7.59755 5.75233 7.82694 5.76363 8.00504 5.6513L7.73832 5.22839ZM10.2253 4.19754L10.3358 4.68519C10.5411 4.63867 10.6953 4.46849 10.7214 4.25955L10.2253 4.19754ZM13.5 1.5H10.5V2.5H13.5V1.5ZM14.2708 4.13552L13.9961 1.93798L13.0039 2.06202L13.2786 4.25955L14.2708 4.13552ZM16.5284 4.80547C15.7279 4.30059 14.8369 3.92545 13.8851 3.70989L13.6642 4.68519C14.503 4.87517 15.2886 5.20583 15.995 5.6513L16.5284 4.80547ZM16.5687 5.62306L18.3174 4.26294L17.7034 3.47359L15.9547 4.83371L16.5687 5.62306ZM17.6569 4.22182L19.7782 6.34314L20.4853 5.63603L18.364 3.51471L17.6569 4.22182ZM19.7371 5.68261L18.3769 7.43134L19.1663 8.04528L20.5264 6.29655L19.7371 5.68261ZM20.2901 10.1149C20.0746 9.16313 19.6994 8.27213 19.1945 7.47158L18.3487 8.00503C18.7942 8.71138 19.1248 9.49695 19.3148 10.3358L20.2901 10.1149ZM22.062 10.0039L19.8645 9.72917L19.7404 10.7214L21.938 10.9961L22.062 10.0039ZM22.5 13.5V10.5H21.5V13.5H22.5ZM19.8645 14.2708L22.062 13.9961L21.938 13.0039L19.7404 13.2786L19.8645 14.2708ZM19.1945 16.5284C19.6994 15.7279 20.0746 14.8369 20.2901 13.8851L19.3148 13.6642C19.1248 14.503 18.7942 15.2886 18.3487 15.995L19.1945 16.5284ZM20.5264 17.7034L19.1663 15.9547L18.3769 16.5687L19.7371 18.3174L20.5264 17.7034ZM18.364 20.4853L20.4853 18.364L19.7782 17.6569L17.6569 19.7782L18.364 20.4853ZM15.9547 19.1663L17.7034 20.5264L18.3174 19.7371L16.5687 18.3769L15.9547 19.1663ZM13.8851 20.2901C14.8369 20.0746 15.7279 19.6994 16.5284 19.1945L15.995 18.3487C15.2886 18.7942 14.503 19.1248 13.6642 19.3148L13.8851 20.2901ZM13.9961 22.062L14.2708 19.8645L13.2786 19.7404L13.0039 21.938L13.9961 22.062ZM10.5 22.5H13.5V21.5H10.5V22.5ZM9.72917 19.8645L10.0039 22.062L10.9961 21.938L10.7214 19.7404L9.72917 19.8645ZM7.4716 19.1945C8.27214 19.6994 9.16314 20.0746 10.1149 20.2901L10.3358 19.3148C9.49696 19.1248 8.71139 18.7942 8.00504 18.3487L7.4716 19.1945ZM6.29656 20.5264L8.04529 19.1663L7.43135 18.3769L5.68262 19.7371L6.29656 20.5264ZM3.51472 18.364L5.63604 20.4853L6.34315 19.7782L4.22183 17.6569L3.51472 18.364ZM4.83372 15.9547L3.4736 17.7034L4.26295 18.3174L5.62307 16.5687L4.83372 15.9547ZM3.70989 13.8851C3.92545 14.8369 4.30059 15.7279 4.80547 16.5284L5.65131 15.995C5.20584 15.2886 4.87517 14.503 4.68519 13.6642L3.70989 13.8851ZM1.93798 13.9961L4.13552 14.2708L4.25955 13.2786L2.06202 13.0039L1.93798 13.9961ZM1.5 10.5V13.5H2.5V10.5H1.5ZM4.13552 9.72917L1.93798 10.0039L2.06202 10.9961L4.25955 10.7214L4.13552 9.72917ZM4.80547 7.47159C4.30059 8.27213 3.92545 9.16313 3.70989 10.1149L4.68519 10.3358C4.87517 9.49696 5.20583 8.71138 5.65131 8.00503L4.80547 7.47159ZM3.47359 6.29656L4.83371 8.04528L5.62307 7.43134L4.26295 5.68262L3.47359 6.29656ZM5.63604 3.51471L3.51472 5.63603L4.22182 6.34314L6.34314 4.22182L5.63604 3.51471ZM8.04529 4.83371L6.29656 3.47359L5.68262 4.26294L7.43135 5.62306L8.04529 4.83371ZM10.1149 3.70989C9.16313 3.92545 8.27214 4.30059 7.4716 4.80547L8.00504 5.6513C8.71139 5.20583 9.49696 4.87517 10.3358 4.68519L10.1149 3.70989ZM10.0039 1.93798L9.72917 4.13552L10.7214 4.25955L10.9961 2.06202L10.0039 1.93798Z" />
      <circle cx="12" cy="12" r="4" stroke-width="2" stroke-linejoin="round"/>
    </svg>
  </a>
  <div id="settings-panel" class="hidden"></div>
`;document.getElementById("locate-btn")?.addEventListener("click",t=>{t.preventDefault(),$o().catch(n=>{console.error("Error fetching user location on button click:",n)})});So();let pt=null,ln=null;const qn=()=>{const t=go();ln!==t&&(ln=t,Dt(Ot(),Vt(),Pt())),pt=requestAnimationFrame(qn)};window.addEventListener("sundial:gnomonStyleChanged",()=>{Dt(Ot(),Vt(),Pt())});window.addEventListener("sundial:gnomonLengthScaleChanged",()=>{Dt(Ot(),Vt(),Pt())});pt=requestAnimationFrame(qn);window.addEventListener("beforeunload",()=>{pt!==null&&cancelAnimationFrame(pt)});
